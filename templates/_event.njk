{% extends '_base.njk' %}

{% set thispage = 'events' %}
{% set pagedesc = pagedesc if pagedesc else 'Events in MASK' %}

{% macro slide(folder, img) %}
	<div class="slide"> <img src="/assets/events/{{ folder }}/{{ img }}"> </div>
{% endmacro %}

{% block pagecontent %}
	<h1> {{ pagetitle if pagetitle else 'MASK Event' }} </h1>
	<div class="transparent-box">
		{% block eventContent %}
		{% endblock %}
	</div>
	<a href="/events" style="color: var(--error-red);">Click here</a> to go back
	<br><br>
{% endblock %}

{% block customjs %}
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const swiper = new Swiper('.swiper-container', {
                loop: true,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                autoplay: {
                    delay: 3000,
                },
                effect: 'slide',
                speed: 800,
                slidesPerView: 1,
                spaceBetween: 10,
            });
        });
    </script>
	{# <script>
		window.addEventListener('load', () => {
			[...document.querySelectorAll('.image-container')].forEach(imageContainer => {
				const [img, p] = [...imageContainer.children];
				p.style.width = getComputedStyle(img).getPropertyValue('width');
			});
		});
	</script> #}
	{% block eventJS %}
	{% endblock %}
{% endblock %}

{% block customcss %}
	<style>
		h1, h2 {
			color: var(--red);
			margin-block-start: 0.8em;
			margin-block-end: 0.8em;
		}
		.transparent-box {
			color: var(--light-gray);
			background-color: rgba(255,255,255,.2);
			padding: 30px calc(10px + 4vw);
			border-radius: 20px;
			margin: 20px 3vw;
			text-align: left;
		}

		.transparent-box a {
			color: var(--off-white);
			transition: color 0.3s;
		}

		.transparent-box a:hover {
			color: var(--error-red);
		}

		.transparent-box > p {
			margin-bottom: 12px;
		}

		.transparent-box > img {
			display: block;
			max-width: 100%;
			max-height: 40vh;
			margin: 5px auto;
			border-radius: 5px;
		}

		.image-container {
			max-width: 70vw;
			width: calc(min(700px, 70vw));
			margin: 10px auto;
			border: solid 2px;
			border-radius: 10px;
		}


		.image-container > img {
			width: calc(min(700px, 70vw));
			max-height: 45vh;
			border-radius: 10px;
			object-fit: contain;
		}

		.image-container > p {
			color: var(--error-red);
			text-align: center;
			margin: 5px auto;
		}

		.event-info{
			max-width: calc(min(500px, 70vw));
			width: -moz-fit-content;
			width: fit-content;

			margin: 20px auto;
			border: 2px solid var(--off-white);
			border-radius: 10px;
			padding: 8px;

			font-size: 13px;
		}

		.event-info > .heading {
			color: var(--error-red);
			font-weight: bold;
			line-height: 1.4;
		}

		.slideshow-container {
			overflow: hidden;
			margin: auto;
			width: calc(min(700px, 70vw));
			height: calc(min(60vw, 450px));
			border-radius: 10px;
		}

		.slideshow-container > .slide {
			background-color: var(--abyss);
			width: calc(min(700px, 70vw));
			height: calc(min(60vw, 450px));
			border-radius: 10px;
		}

		.slide > img {
			display: block;
			max-width: calc(min(700px, 70vw));
			max-height: calc(min(60vw, 450px));
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		.swiper-slide {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .swiper-slide img {
            height: 100%;
            width: auto; 
            object-fit: cover;
        }

		.swiper-container {
            width: 80vw;
            height: 70vh;
            max-width: 900px; 
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            position: relative;
        }

		.image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 20px auto;
            width: 100%;
            max-width: 900px;
            overflow: hidden;
            text-align: center; 
        }

		.swiper-button-next,
        .swiper-button-prev {
            color: black;
            top: 50%;
            z-index: 10; 
            padding : 7px 7px 7px 7px;
            width: 10px; 
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 10px; 
			border-radius: 10%;
        }

		.swiper-button-next {
            right: 10px; 
            height: 100px;
        }

        .swiper-button-prev {
            left: 10px; 
        }

        .swiper-button-next::after,
        .swiper-button-prev::after {
            font-size: 20px; 
            font-weight: bold;
			color: var(--error-red);
        }

		.swiper-button-next:hover,
		.swiper-button-prev:hover {
			background-color: #272727; 
			transform : scale(1.09);
		}

		@media (max-width: 768px) {
			.swiper-container {
				width: 90vw;
				height: 50vh;
			}
			.swiper-button-next,
			.swiper-button-prev {
				width: 10px;
				height: 10px;
				top: 45%;
				z-index:10;
			}
			.swiper-button-next {
				margin-right:20px;
                height:20px
                width:20px;
			}
			.swiper-button-prev {
				margin-left:20px;
			}
			.swiper-slide img {
				height: 85%;
				width: auto;
				object-fit: contain;
				display: block;
				margin: auto;
				align-items:center;
			}
        }
        .swiper-pagination .swiper-pagination-bullet {
            background-color: var(--error-red); 
        }
	</style>
	{% block eventCSS %}
	{% endblock %}
{% endblock %}
