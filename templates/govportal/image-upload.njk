{% extends "govportal/govportal.njk" %}

{% set thispage = 'govportal' %}
{% set pagetitle = 'Governor Portal | Image Upload' %}
{% set actionname = 'Image Upload' %}

{% block actioncontent %}
	<form enctype="multipart/form-data">
		<div>
			<label for="image">Select Image:</label>
			<input type="file" name="image" id="image" accept=".png,.jpeg,.jpg" required>
		</div>
		<div>
			<label for="desc">Alt Text:</label>
			<textarea id="desc" name="desc" rows="5" cols="50" required></textarea>
		</div>
		<button name="submit" id="submit" onclick="uploadImage()">Upload Image</button>
	</form>
{% endblock %}

{% block customcss %}
	<style>
		form {
			background-color: rgba(255,255,255,.2);
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 1rem;
			width: 30%;
			border-radius: 5px;
			margin-left: 35%;
			padding-top: 10px;
			padding-bottom: 10px;
			color: var(--off-white);
			font-size: 1.2em;
		}
		button {
		border: 2px solid var(--off-white);
		border-radius: 4px;
		background: var(--ghost-gray);
		padding: 5px 7px;
		color: var(--white);
		transition: 0.4s;
		cursor: pointer;
		font-size: 1.1em;
		}
		button:hover {
			background-color: var(--middle-gray);
		}
	</style>
{% endblock %}

{% block customjs %}
	<script>
		function uploadImage(e) {
			var image = document.getElementById("image").files[0];
			var desc = document.getElementById("desc").value;
			var formdata = new FormData();
			formdata.append("image", image);
			formdata.append("desc", desc);
			console.log(formdata);
			var ajax = new XMLHttpRequest();
			ajax.open("POST", "/uploadimage");
			ajax.send(formdata);
		}
	</script>
{% endblock %}
