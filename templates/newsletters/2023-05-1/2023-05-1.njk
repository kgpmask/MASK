{% extends '_newsletter.njk' %}

{% set pagetitle = 'May 2023 Issue' %}
{% set pagedesc = 'Ahoy, fellow anime enthusiasts! The May issue of the MASK newsletter, be teeming with gripping action anime reviews, exhilarating news, enlightening ‘know your anime memes’, and an enigmatic crossword! Set sail now!' %}

{% block prescript %}
	<script>
		crossMatrix = [
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', '-', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', ' ', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', ' ', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
			[ '-', '-', '-', '-', '-', '-', '-', '-', '-', ' ', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ]
		];
		const letterSpaces = [];
		(() => {
				const maxDimension = Math.max(crossMatrix.length, crossMatrix[0].length);
				const root = document.querySelector(':root');
				root.style.setProperty('--crossword-cell-size', (50 * 10 / maxDimension) + 'px');
				root.style.setProperty('--crossword-font-size', (20 / maxDimension) ** (1 / 2) + 'em');
				crossMatrix.forEach((row, i) => {
					row.forEach((char, j) => {
						if (char === ' ') letterSpaces.push([i, j]);
					});
				});
			})();
	</script>
{% endblock %}

{% block cluejs %}
	{# Clues added, added compatibility for number input.#}
	<script>
		function startClues() {
			new IntersectionObserver(([crossword]) => {
				if (crossword.isIntersecting && crossword.intersectionRatio > 0.8) {
					crosswordVis = true;
				} else {
					crosswordVis = false;
				}
			}, { threshold: [0.99] }).observe(document.getElementById('crossword-table'));
			const clues = [];
			clues.push(`1. <b>One Punch Man:</b> Tornado Of Terror
			3. <b>Chainsaw Man:</b> Name of Denji's demon pet
			7. <b>Black Clover:</b> I really love my little sister, do want to see a picture of her
			8. <b>Fairy Tail:</b> Exceed Partner of Rogue
			9. <b>Naruto:</b> Darkness of Shinobi
			11. <b>One Punch Man:</b> Hero Hunter
			12. <b>Tokyo Ghoul:</b> What is Juuzou’s Jason made of
			13. <b>Cautious Hero:</b> Demon general that appeared in first episode
			14. <b>Hell’s Paradise:</b> The one who is called hollow
			16. <b>Fairy Tail:</b> The only female S–Tier wizard of Fairy Tail Guild is also known as
			18. <b>One Piece:</b> Name of Whitebeard’s sword
			20. <b>Fire Force:</b> The captain of 8th company`.replace(/\t/g, '').split('\n').map(line => line.split(/\. (.*)/)));
			clues.push(`2. <b>Sword Art Online:</b> Asuna’s fiancé traps her in the game called ___________ Online.
			4. <b>JoJo's Bizzare Adventure:</b> Name of Josuke’s Mom
			5. <b>Black Clover:</b> The Uncrowned, Undefeated Lioness
			6. <b>Demon Slayer:</b> Name of Tanjiro’s Father
			10. <b>Bungo Stray Dogs:</b> Archnemesis of main character in Bungo Stray Dogs
			15. <b>Sauce:</b> This Game is a battle royal played with bombs
			17. <b>Black Clover:</b> Name of Yami’s former squad
			19. <b>SAO:</b> Who was the leader of first guild Kirito Joined in SAO`.replace(/\t/g, '').split('\n').map(line => line.split(/\. (.*)/)));
			document.getElementById('crossword-left').innerHTML = `<h3>Across</h3><br/><table class="cross-words">${clues[0].map(clue => `<tr><th>${clue[0]}</th><td>${clue[1]}</td></tr>`).join('')}</table>`;
			document.getElementById('crossword-right').innerHTML = `<h3>Down</h3><br/><table class="cross-words">${clues[1].map(clue => `<tr><th>${clue[0]}</th><td>${clue[1]}</td></tr>`).join('')}</table>`;
		}

		window.onload = () => {
			startCross();
			startClues();
		}
	</script>
{% endblock %}

{% block lettercss %}
	<style>
		:root {
			--black-blue   : #121920;
			--dark-blue    : #112f3f;
			--teal         : #006280;
			--dirty-green  : #4d5843;
			--dirty-yellow : #a98135;
		}
		.page {
			color: var(--dark-blue);
		}
		#cover-page {
			background-image: url(/assets/releases/2023-05-1/cover.webp);
			background-position: center;
			background-size: contain;
			background-repeat: no-repeat;
			background-color: rgba(0, 0, 0, 0) !important;
		}
		.article-full, .article-half, #crossword-left, #crossword-right {
			scrollbar-color: var(--teal) var(--off-white) !important;
		}
		.article-full > h2, .article-half > h2, .article-header {
			text-shadow: 0 0 2px var(--teal) !important;
		}
		.link:hover {
			color: black;
		}
		.wordsearchCellS {
			background-color: var(--dirty-yellow) !important;
		}
		.found-word {
			color: var(--teal) !important;
		}
		.wordsearch-complete {
			color: var(--teal) !important;
		}
		.spoiler:before {
			color: var(--teal);
			background: var(--dirty-yellow);
		}
		.quote {
			color: var(--teal);
			{# font-size: 120%; #}
			font-style: italic;
			text-align: center;
		}
		li {
			margin: 7px 0px;
		}
		#crossword-left, #crossword-right {
			min-height: 75px !important;
			font-size: 0.75em;
			height: calc(80vh - 630px) !important;
		}
		.cross-words{
			text-align: left;
			padding: 0px 10px 0px 5px;
		}
{#
		@media (max-height: 830px) {
			#cross-wrapper {
				display: none;
			}

			#cross-alt {
				display: block !important;
			}
		} #}
	</style>
	<link rel="stylesheet" type="text/css" href="/assets/styles/wordsearch.css"/>
	<link rel="stylesheet" type="text/css" href="/assets/styles/crossword.css"/>
{% endblock %}

