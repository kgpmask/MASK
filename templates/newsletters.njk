{% extends '_base.njk' %}

{% set thispage = 'newsletters' %}
{% set pagetitle = 'Newsletters' %}

{% set latestnewsletter = letters[0] %}

{% macro card(name, link, desc) %}
		<img class="cover" src="../assets/releases/{{ link }}/cover.webp" onerror="this.src='../assets/releases/no-cover.webp'"/>
		<div class="desc">
			<h3>{{ name }}</h3>
			<p>{{ desc }}</p>
		</div>
{% endmacro %}

{% block pagecontent %}
	<div class="wrapper">
	{% block extrainfo %}{% endblock %}
		<div class= "newsletter" id="latest">
			{{ card(latestnewsletter.name, latestnewsletter.link, "weufg ewu fgewuf gewf guwef gyuae gfyuwef guew gfuysefuyweg fyweg fyueyfugevygfvewfyu vesagyfve", 90) }}
		</div>
	{% for letter in letters %}
			{% if not loop.first %}
			<a class="newsletter" class="old">
					{{ card(letter.name, letter.link, letter.desc) }}
			</a>
			{% endif %}
	{% endfor %}
	</div>
{% endblock %}

{% block customcss %}
	<style>
.wrapper{
    block-size: 70 vh;
    padding: 0 2rem 2rem;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 20%;
    grid-template-rows: 1fr 1fr;
    gap: 1rem;
    overflow-x: auto;
    overscroll-behavior-inline: contain;
}
.newsletter{
    padding: 1rem;
    display: grid;
    grid-template-rows: min-content;
    gap: 1 rem;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 0.2rem;
    box-shadow: 0.2rem .5rem 2px -1px rgba(0,0,0,0.6);
}
.newsletter > img{
    inline-size: 100%;
}
#latest{
    grid-row: span 2 ;
    grid-column: span 2 ;
}
.newsletter.desc {
    display: hide;
}
.desc > p{
    text-align: start;s
}




		@media screen and (max-width: 800px) {
.wrapper{
	block-size: 70 vh;
    padding: 0 2rem 2rem;
    display: grid;
    grid-auto-flow: rows;
    {# grid-auto-columns: 37%; #}
    grid-template-column: 1fr 1fr;
    gap: 1rem;
    overflow-x: auto;
    overscroll-behavior-inline: contain;
}
.newsletter{
    padding: 1rem;
    display: grid;
    grid-template-rows: min-content;
    gap: 1 rem;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 0.2rem;
    box-shadow: 0.2rem .5rem 2px -1px rgba(0,0,0,0.6);
}
.newsletter > img{
    inline-size: 100%;
	aspect-ratio:5/7;
}
#latest{
    grid-row: span 2 ;
    grid-column: span 2 ;
}
.desc{
	margin-top: 0.4rem;
	border-radius-bottom: 0.15rem;
	background-color: rgba(0,0,0,0.4);
}
.desc > p{
    text-align: start;
}

}


@media screen and (max-width: 480px) {
	.wrapper{
	block-size: 70 vh;
    {# padding: 0 2rem 2rem; #}
    display: grid;
    grid-auto-flow: rows;
    {# grid-auto-columns: 37%; #}
    gap: 0.3rem;
    overflow-x: auto;
    overscroll-behavior-inline: contain;
    grid-template-columns: 50% 50%;
}
.newsletter{
    display: grid;
	padding:4px;
    grid-template-rows: min-content;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 0.2rem;
    box-shadow: 0.2rem .5rem 2px -1px rgba(0,0,0,0.6);
}
.newsletter > img{
    inline-size: 100%;
	aspect-ratio:5/7;
}
#latest{
    grid-row: span 2 ;
    grid-column: span 2 ;
}
.desc{
	margin-top: 0.4rem;
	border-radius-bottom: 0.2rem;
	background-color: rgba(0,0,0,0.4);
}
.desc > p{
	padding:4px;
	text-align: start;
    font-size: smaller;
	display:none;
}

.wrapper{
   grid-template-column: 48dvw 48dvw;
}
}
	</style>
{% endblock %}

{% block customjs %}
	<script>
		window.onload = () => {
			const accs = document.getElementsByClassName('accordion');
			for (const acc of accs) {
				acc.addEventListener('click', function () {
					this.classList.toggle('active-accordion');
					const panel = this.nextElementSibling;
					if (panel.style.maxHeight) panel.style.maxHeight = null;
					else panel.style.maxHeight = panel.scrollHeight + 'px';
				});
			}
			accs[0].click();
		}
	</script>
{% endblock %}
