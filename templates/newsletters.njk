{% extends '_base.njk' %}

{% set thispage = 'newsletters' %}
{% set pagetitle = 'Newsletters' %}

{% set latestnewsletter = letters[0] %}

{% macro card(name, link, desc) %}
	<a class="card" href="/newsletters/{{ link }}">
		<img class="cover" src="../assets/releases/{{ link }}/cover.webp" onerror="this.src='../assets/releases/no-cover.webp'"/>
		<div class="desc" style="width: 100%; text-align: left;">
			<h3>{{ name }}</h3>
			<p>{{ desc }}</p>
		</div>
	</a>
{% endmacro %}

{% block pagecontent %}
	<h1> Newsletters </h1>
	{% block extrainfo %}{% endblock %}
	<div class="container">
		<div class="latest">
			<h2>Latest Release</h2>
			{{ card(latestnewsletter.name, latestnewsletter.link, "weufg ewu fgewuf gewf guwef gyuae gfyuwef guew gfuysefuyweg fyweg fyueyfugevygfvewfyu vesagyfve", 90) }}
		</div>
		<div class="previous">
			<h2>Previous Releases</h2>
			<div class="list">
				{% for letter in letters %}
					{% if not loop.first %}
						{{ card(letter.name, letter.link, letter.desc) }}	
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
	<div style="height: 40px;"></div>
{% endblock %}

{% block customcss %}
	<style>
		.container {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}
		.container > div {
			display: flex;
			flex-direction: column;
			align-items: center;
			border: 2px solid rgba(255,255,255,0.1);
			border-radius: 12px;
			margin: 10px;
			padding: 12px 5px;
			background-color: rgba(255,255,255,0.13);
			backdrop-filter: blur(5px);
			max-height: calc(100vh - 300px);
			height: fit-content;
			overflow-y: scroll;
		}
		.previous {
			width: 50%;
		}
		.latest {
			width: 32%;
		}
		.list {
			display: flex;
			flex-direction: row;
			flex-wrap: wrap;
		}
		.card {
			display: flex;
			align-items: center;
			flex-direction: row;
			margin: 10px;
			border: 1px solid var(--light-gray);
			border-radius: 6px;
			position: relative;
			background: none;
			width: calc(50% - 22px);
			text-decoration: none;
			transition: color 0.3s;
		}
		.latest > .card {
			flex-direction: column;
			justify-content: space-between;
			border: none;
			width: 95%;
		}
		.card * {
			margin: 5px;
		}
		.latest > .card > img {
			width: 70%;	
		}
		.latest > .card > desc {
			justify-content: space-between;
			min-height: 25%;
			width: 88%;
		}
		.card > img {
			width: 33%;
		}
		.desc {
			height: 100%;
			display: flex;
			flex-direction: column;
			justify-content: start;
			font-size: 0.94em;
		}
		* {
			scrollbar-width: 5px;
			scrollbar-color: var(--ghost-gray) transparent;
		}
		*::-webkit-scrollbar {
			width: 5px;
		}
		*::-webkit-scrollbar-track {
			background: transparent;
		}
		*::-webkit-scrollbar-thumb {
			background-color: var(--ghost-gray);
			border-radius: 7px;
		}
		@media (max-width: 1600px) {
			.latest {
				width: 40vw;
			}

			.previous {
				width: 45vw;
			}

			.list {
				justify-content: center;
			}

			.card {
				width: 40vw;
			}
		}
		@media (max-width: 780px) {
			.container {
				flex-direction: column;
				align-items: center;
			}
			.container > div {
				width: 80%;
				max-height: 83vh;
				height: fit-content;
			}
			.card {
				width: 90%;
			}
		}
		@media (max-width: 500px) {
			.card {
				flex-direction: column;
			}
			.previous > .list > .card > img {
				width: 60%;
				height: calc(30% * 3;)
			}
			.list {
				grid-auto-rows: unset;
			}
		}
		@media (max-height: 530px) {
			.container > div {
				width: 45% !important;
				height: 257px !important; 
			}

			.card {
				flex-direction: row !important;
				width: 90% !important;
				border: 1px solid var(--light-gray) !important;
			}

			.card img {
				width: 33% !important;
			}
		}
	</style>
{% endblock %}

{% block customjs %}
	<script>
		
	</script>
{% endblock %}
